{{define "title"}}{{.Book.Title}}{{end}} {{define "main"}}
<main class="container">
  <div class="breadcrumb">
    <a href="/"><i class="fas fa-home"></i> Home</a>
    <span class="separator">/</span>
    <a href="/search">Search</a>
    <span class="separator">/</span>
    <span class="current">{{.Book.Title}}</span>
  </div>

  <div class="book-details-layout">
    <div class="book-main-image">
      <img src="{{.Book.CoverImage}}" alt="{{.Book.Title}}" />
      <div class="image-actions">
        <button class="icon-btn-large"><i class="fas fa-heart"></i></button>
        <button class="icon-btn-large"><i class="fas fa-share-alt"></i></button>
      </div>
    </div>

    <div class="book-details-content">
      <div class="book-header">
        {{range .Book.Genres}}
        <span class="book-category">{{.}}</span>
        {{end}} {{if eq .Book.CopiesAvailable 0}}
        <span class="status-badge borrowed">Borrowed</span>
        {{else}}
        <span class="status-badge available">Available</span>
        {{end}}
      </div>

      <h1 class="book-details-title">{{.Book.Title}}</h1>
      <p class="book-details-author">by {{.Book.Author}}</p>

      <div class="book-meta">
        <div class="meta-item">
          <i class="fas fa-barcode"></i>
          <div>
            <span class="meta-label">ISBN</span>
            <span class="meta-value">{{.Book.ISBN}}</span>
          </div>
        </div>
        <div class="meta-item">
          <i class="fas fa-calendar"></i>
          <div>
            <span class="meta-label">Published</span>
            <span class="meta-value"
              >{{.Book.PublishDate.Format "January 2, 2006"}}</span
            >
          </div>
        </div>
        <div class="meta-item">
          <i class="fas fa-file-alt"></i>
          <div>
            <span class="meta-label">Pages</span>
            <span class="meta-value">{{.Book.Pages}}</span>
          </div>
        </div>
        <div class="meta-item">
          <i class="fas fa-language"></i>
          <div>
            <span class="meta-label">Language</span>
            <span class="meta-value">{{.Book.Language}}</span>
          </div>
        </div>
        <div class="meta-item">
          <i class="fas fa-building"></i>
          <div>
            <span class="meta-label">Publisher</span>
            <span class="meta-value">{{.Book.Publisher}}</span>
          </div>
        </div>
        <div class="meta-item">
          <i class="fas fa-copy"></i>
          <div>
            <span class="meta-label">Available Copies</span>
            <span class="meta-value"
              >{{.Book.CopiesAvailable}} of {{.Book.CopiesTotal}}</span
            >
          </div>
        </div>
      </div>

      <div class="book-actions">
        {{if gt .Book.CopiesAvailable 0}}
        <form method="POST" action="/books/{{.Book.ID}}/borrow">
          <button class="btn btn-primary btn-large" type="submit">
            <i class="fas fa-book-reader"></i> Borrow Book
          </button>
        </form>
        {{else}}
        <button class="btn btn-primary btn-large" disabled>
          No copies available
        </button>
        {{end}}
      </div>

      <div class="book-description">
        <h3>Description</h3>
        <p>{{.Book.Description}}</p>
      </div>

      <div class="book-tags">
        <h3>Tags</h3>
        <div class="tags-list">
          {{range .Book.Genres}}
          <span class="tag">{{.}}</span>
          {{end}}
        </div>
      </div>
    </div>
  </div>
</main>
{{end}}
